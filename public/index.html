<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script>
$(document).ready(function () {
	var split = location.search.replace('?', '').split('=');
	$.getJSON('teaser/'+split[1],function (data) {
		if(data.status == "err") {
			alert("Invalid teaser id?");
			return;
		}
		console.log(data);
		$("#teaser").empty();
		$("#teaser").append("<h2>"+data.result[0].question+"</h2");
	}).error(function(){alert("error while getting teaser")});		
			
});
function doit() {
	var split = location.search.replace('?', '').split('=');
	console.log(split);
	$.post('person',{phone: $("#phone").val(), teaser_id:split[1]},function(response) {
			console.log(response);
			$("#theform").empty();
			$("#theform").append("<h1>Thanks!</h1>");	
		});
	return false;
}
</script>
</head>
<body>
<div id="teaser">
</div>
<div id="theform">
<form id="person" method="POST" action="person" onSubmit="return doit()">
Phone number: <input id="phone" name="phone" type="text"/>
<input type="submit" value="submit">
</form>
</div>

</body>
</html>
